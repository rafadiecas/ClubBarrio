{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Noticias</title>

    <style>
        #card-text{
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
        #foto_noticia{
            max-width: 280px;
            max-height: 280px;
            object-fit: contain;
            aspect-ratio: auto;
        }

        .text-comment {
          overflow-wrap: break-word;
          text-overflow: ellipsis;
          overflow: hidden;
          width: 260px;
          height: 10.2em;
          white-space: nowrap;

        }

        .textoCompleto {
          height: auto;
          width: auto;
          white-space: normal;
        }

        .more {
          cursor: pointer;
          color: black;
          text-decoration: underline;
        }

    </style>
</head>
{% include "barra_navegacion.html" %}
<body>
    <div class="container" style="width: 60%">
        {% for n in entity %}
            <div class="card" style="margin-block:20px">
                <div class="card-header">
                    <h2>{{ n.titulo }}</h2>
                </div>
                <div class="card-body" id="carta">
                    <div class="row row-cols-md-2 row-cols-sm-1" id="card-text">
                        <div class="text-comment">
                            <p class="text-truncate">{{ n.articulo }}</p>
                            <span class="more">Leer más...</span>
                        </div>
                        <img src="{{ n.url_imagen }}" class="img-fluid" alt="imagen" id="foto_noticia">
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

   <script>
        // Select all elements with the class 'more'
        var buttons = document.querySelectorAll('.more');
        
        // For each button, add an event listener for the 'click' event
        buttons.forEach(button => {
            button.addEventListener('click', toggleText);
        });
        
        // Define the function 'toggleText' that will be called when a button is clicked
        function toggleText(event) {
            // Get the inner HTML of the clicked button (which is the event target)
            var buttonText = event.target.innerHTML;
            // Get the parent element of the clicked button
            var cardText = event.target.parentElement;
        
            // Toggle the 'textoCompleto' class for the parent element
            // If the class is present, it will be removed; if it's not present, it will be added
            cardText.classList.toggle('textoCompleto');
            // Toggle the 'text-truncate' class for the 'p' element inside the parent element
            cardText.querySelector('p').classList.toggle('text-truncate');
        
            // If the button text is 'Leer más...', change it to 'Leer menos...'
            // Otherwise, change it to 'Leer más...'
            buttonText === 'Leer más...' ? buttonText = 'Leer menos...' : buttonText = 'Leer más...';
            // Update the inner HTML of the clicked button with the new text
            event.target.innerHTML = buttonText;
        }
    </script>

    {% include 'paginator.html' %}

</body>
{% include 'footer.html' %}
</html>
